Практическое задание. Экзамен
Дисциплина
Нереляционные базы данных

Форма проверки
Задание с проверкой преподавателем:

студент выполняет задание самостоятельно
преподаватель проверяет и выставляет оценки в Личном кабинете
предусмотрен вебинар, где будет возможность задать вопросы по заданию
Имя преподавателя
Артур Домбровский

Время выполнения
3 часа

Цель задания
Научиться работать с нереляционными СУБД в рамках проекта

Инструменты для выполнения ДЗ
Вам понадобится:

Redis
GitHub
Правила приёма работы
Прикрепите ссылку на GitHub-репозиторий с выполненным проектом.
Пояснение: необходимо прикрепить ссылку на проект, который вы выполняете в рамках дисциплины по выбору «Язык Go» и частью которого является задание по нереляциионным базам данных
Важно: убедитесь, что открыт доступ по ссылке, есть название проекта и ваше имя.

Критерии оценивания
В рамках экзамена по дисциплине «Нереляционные базы данных» проверяется и оценивается только часть по работе с нереляционными базами данных.

Чек-лист самопроверки
Задание считается выполненным, если:

прикреплена ссылка на репозиторий с выполненным заданием
доступ к репозиторию открыт
код даёт правильный ответ к задаче
Задание не выполнено, если:

репозиторий с заданием не прикреплен или отсутствует доступ по ссылке
код выдаёт ошибку или даёт неправильный ответ
Дедлайн
20.12. 2025

Описание задания
Проект: «Система аналитики личных трат»

Цель проекта — разработать микросервисное приложение для учёта и анализа личных финансов. Приложение позволит фиксировать личные траты и бюджеты, получать базовые отчёты и использовать Google Таблицы как UI, взаимодействуя с системой через API.

Работа с нереляционными базами данных в рамках проекта —использование Redis для хранения данных

Задача: подключить Redis как ключ-значение кеш с TTL для результатов отчёта и списков бюджетов.

Запуск Redis (любой из вариантов):

Docker: docker run -p 6379:6379 --name cashcraft-redis -d redis:7-alpine
локальная установка — по желанию.
Инициализация клиента в Ledger:

добавьте пакет кэша, например ledger/internal/cache (или в слое инфраструктуры).
подключение через официальный клиент.
настройте конфигурацию из env:
REDIS_ADDR (по умолчанию localhost:6379);
REDIS_DB (по умолчанию 0);
REDIS_PASSWORD (опционально);
при успешном старте залогируйте подключение.
Кэширование результатов отчёта GetReportSummary(ctx, from, to):

сформируйте ключ, например:report:summary:<from>:<to> (даты в формате YYYY-MM-DD).
попробуйте прочитать значение из Redis:
если нашли — распарсить и вернуть клиенту (cache hit);
если не нашли, посчитайте отчёт через БД (как у вас реализовано сейчас или добавьте простую агрегацию SUM(amount) GROUP BY category для интервала), затем запишите результат в Redis с TTL (например, 30 секунд) и верните клиенту (cache miss → set);
настройте сериализацию: удобно хранить целиком JSON (строка) либо []byte — на ваше усмотрение.
Кэш списков бюджетов ListBudgets():

ключ: budgets:all, TTL 10–30 секунд.
при SetBudget(…) достаточно короткого TTL. Можно просто прописать DEL budgets:all после успешной записи.
Важно: Gateway менять не требуется — кэш прозрачен, все изменения в Ledger.